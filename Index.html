<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurateur Mug Collection</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #ffffff 100%);
            color: #2c2c2c;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Stepper luxueux */
        .stepper-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 20px;
        }

        .stepper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 50px;
        }

        .stepper::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 10%;
            right: 10%;
            height: 2px;
            background: linear-gradient(to right, #d4af37, #c9a961);
            z-index: 0;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
            flex: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid #d4af37;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            color: #d4af37;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #d4af37, #f4d03f);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.4);
        }

        .step-label {
            margin-top: 12px;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #999;
            font-weight: 400;
            transition: all 0.3s ease;
        }

        .step.active .step-label {
            color: #d4af37;
            font-weight: 600;
        }

        /* Container principal */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Canvas 3D */
        #canvas-container {
            width: 100%;
            height: 400px;
            background: radial-gradient(circle at center, #ffffff 0%, #f8f8f8 100%);
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            margin-bottom: 40px;
            overflow: hidden;
            position: relative;
        }

        .canvas-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            letter-spacing: 1.5px;
            color: #aaa;
            text-transform: uppercase;
            pointer-events: none;
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 0.8; }
        }

        /* Sections de contenu */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Grille de logos */
        .logo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .logo-card {
            aspect-ratio: 1;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .logo-card:hover {
            border-color: #d4af37;
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.2);
        }

        .logo-card.selected {
            border-color: #d4af37;
            border-width: 3px;
            background: linear-gradient(135deg, #fff9e6 0%, #ffffff 100%);
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.3);
        }

        .logo-card svg {
            width: 60%;
            height: 60%;
            fill: #2c2c2c;
            transition: all 0.3s ease;
        }

        .logo-card:hover svg {
            fill: #d4af37;
            transform: scale(1.1);
        }

        /* Section texte */
        .text-section {
            max-width: 600px;
            margin: 0 auto;
            padding: 30px;
        }

        .input-group {
            margin-bottom: 30px;
        }

        .input-label {
            display: block;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #999;
            margin-bottom: 12px;
            font-weight: 400;
        }

        .text-input {
            width: 100%;
            border: none;
            border-bottom: 2px solid #e8e8e8;
            padding: 16px 8px;
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 18px;
            color: #2c2c2c;
            background: transparent;
            transition: all 0.3s ease;
            outline: none;
        }

        .text-input:focus {
            border-bottom-color: #d4af37;
        }

        .text-input::placeholder {
            color: #ccc;
            font-style: italic;
        }

        /* Section revue */
        .review-section {
            max-width: 600px;
            margin: 0 auto;
            padding: 30px;
        }

        .review-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
            margin-bottom: 20px;
        }

        .review-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .review-label {
            font-size: 12px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: #999;
        }

        .review-value {
            font-size: 16px;
            color: #2c2c2c;
            font-weight: 600;
        }

        /* Boutons de navigation */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            padding-bottom: 40px;
        }

        .btn {
            padding: 14px 40px;
            border: none;
            border-radius: 50px;
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 13px;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #d4af37, #f4d03f);
            color: white;
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #2c2c2c;
            border: 2px solid #e8e8e8;
        }

        .btn-secondary:hover {
            border-color: #d4af37;
            color: #d4af37;
        }

        /* Titre de section */
        .section-title {
            text-align: center;
            font-size: 28px;
            font-weight: 400;
            color: #2c2c2c;
            margin-bottom: 12px;
            letter-spacing: 1px;
        }

        .section-subtitle {
            text-align: center;
            font-size: 13px;
            color: #999;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 40px;
            font-weight: 400;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stepper-container {
                padding: 20px 10px;
            }

            .step-label {
                font-size: 9px;
                letter-spacing: 1px;
            }

            .step-circle {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }

            .logo-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            #canvas-container {
                height: 300px;
            }

            .section-title {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <!-- Stepper -->
    <div class="stepper-container">
        <div class="stepper">
            <div class="step active" data-step="0" onclick="goToStep(0)">
                <div class="step-circle">01</div>
                <div class="step-label">Logo</div>
            </div>
            <div class="step" data-step="1" onclick="goToStep(1)">
                <div class="step-circle">02</div>
                <div class="step-label">Gravure</div>
            </div>
            <div class="step" data-step="2" onclick="goToStep(2)">
                <div class="step-circle">03</div>
                <div class="step-label">Revue</div>
            </div>
        </div>
    </div>

    <!-- Container principal -->
    <div class="main-container">
        <!-- Canvas 3D -->
        <div id="canvas-container">
            <div class="canvas-hint">Glissez pour faire pivoter</div>
        </div>

        <!-- Section 1: Logos -->
        <div class="content-section active" data-section="0">
            <h2 class="section-title">Choisissez votre logo</h2>
            <p class="section-subtitle">S√©lectionnez un motif pour votre collection</p>

            <div class="logo-grid">
                <div class="logo-card" onclick="selectLogo(0, this)">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 18c-3.54 0-6.71-2.39-7.66-5.84-.09-.34.07-.69.4-.82.33-.13.7.01.88.32C6.55 15.67 9.09 17 12 17s5.45-1.33 6.38-3.34c.18-.31.55-.45.88-.32.33.13.49.48.4.82C18.71 17.61 15.54 20 12 20z"/>
                    </svg>
                </div>
                <div class="logo-card" onclick="selectLogo(1, this)">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                </div>
                <div class="logo-card" onclick="selectLogo(2, this)">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
                    </svg>
                </div>
                <div class="logo-card" onclick="selectLogo(3, this)">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                </div>
                <div class="logo-card" onclick="selectLogo(4, this)">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                </div>
                <div class="logo-card" onclick="selectLogo(5, this)">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Section 2: Gravure -->
        <div class="content-section" data-section="1">
            <h2 class="section-title">Personnalisez votre gravure</h2>
            <p class="section-subtitle">Ajoutez votre message unique</p>

            <div class="text-section">
                <div class="input-group">
                    <label class="input-label">Votre message</label>
                    <input
                        type="text"
                        class="text-input"
                        id="userText"
                        placeholder="Entrez votre texte..."
                        maxlength="30"
                        oninput="updateText()"
                    >
                </div>
                <div class="input-group">
                    <label class="input-label">Aper√ßu</label>
                    <div style="text-align: center; padding: 30px; background: #f9f9f9; border-radius: 8px; font-size: 20px; color: #d4af37; font-style: italic;">
                        <span id="textPreview">Votre texte appara√Ætra ici</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 3: Revue -->
        <div class="content-section" data-section="2">
            <h2 class="section-title">Votre configuration</h2>
            <p class="section-subtitle">V√©rifiez votre cr√©ation</p>

            <div class="review-section">
                <div class="review-card">
                    <div class="review-item">
                        <span class="review-label">Logo s√©lectionn√©</span>
                        <span class="review-value" id="reviewLogo">Aucun</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Gravure</span>
                        <span class="review-value" id="reviewText">Aucune</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Collection</span>
                        <span class="review-value">Edition Luxe</span>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px; padding: 20px; background: linear-gradient(135deg, #fff9e6 0%, #ffffff 100%); border-radius: 12px; border: 1px solid #f4d03f;">
                    <p style="font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: #999; margin-bottom: 8px;">Prix de la collection</p>
                    <p style="font-size: 32px; color: #d4af37; font-weight: 600;">39,90 ‚Ç¨</p>
                </div>
            </div>
        </div>

        <!-- Boutons de navigation -->
        <div class="nav-buttons">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">
                Retour
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                Continuer
            </button>
        </div>
    </div>

    <script>
        // √âtat global
        let currentStep = 0;
        let selectedLogoIndex = -1;
        let userTextValue = '';

        // Initialisation 3D
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / 400, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });

        const container = document.getElementById('canvas-container');
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        // Cr√©er le mug (cylindre avec handle)
        const mugGroup = new THREE.Group();

        // Corps du mug
        const bodyGeometry = new THREE.CylinderGeometry(1.2, 1, 2.5, 32);
        const bodyMaterial = new THREE.MeshPhongMaterial({
            color: 0xffffff,
            shininess: 80,
            specular: 0x333333
        });
        const mugBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        mugGroup.add(mugBody);

        // Poign√©e du mug
        const handleCurve = new THREE.EllipseCurve(0, 0, 0.6, 0.8, 0, Math.PI * 1.5, false, 0);
        const handlePoints = handleCurve.getPoints(50);
        const handleGeometry = new THREE.BufferGeometry().setFromPoints(handlePoints);
        const handleMaterial = new THREE.LineBasicMaterial({ color: 0xffffff, linewidth: 8 });
        const handleLine = new THREE.Line(handleGeometry, handleMaterial);
        handleLine.position.set(1.3, 0, 0);
        handleLine.rotation.y = Math.PI / 2;

        // Tube pour la poign√©e
        const handleTubeGeometry = new THREE.TubeGeometry(
            new THREE.CatmullRomCurve3([
                new THREE.Vector3(1.2, 0.8, 0),
                new THREE.Vector3(1.7, 0.8, 0),
                new THREE.Vector3(1.9, 0, 0),
                new THREE.Vector3(1.7, -0.8, 0),
                new THREE.Vector3(1.2, -0.8, 0)
            ]),
            20, 0.1, 8, false
        );
        const handleTube = new THREE.Mesh(handleTubeGeometry, bodyMaterial);
        mugGroup.add(handleTube);

        scene.add(mugGroup);

        // √âclairage
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight1.position.set(5, 5, 5);
        scene.add(directionalLight1);

        const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.4);
        directionalLight2.position.set(-5, -5, -5);
        scene.add(directionalLight2);

        camera.position.z = 6;
        camera.position.y = 0.5;

        // Variables pour la rotation tactile
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let rotation = { x: 0, y: 0 };

        // Gestion du tactile/souris
        renderer.domElement.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMousePosition = { x: e.clientX, y: e.clientY };
        });

        renderer.domElement.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - previousMousePosition.x;
                const deltaY = e.clientY - previousMousePosition.y;

                rotation.y += deltaX * 0.01;
                rotation.x += deltaY * 0.01;

                previousMousePosition = { x: e.clientX, y: e.clientY };
            }
        });

        renderer.domElement.addEventListener('mouseup', () => {
            isDragging = false;
        });

        // Support tactile
        renderer.domElement.addEventListener('touchstart', (e) => {
            isDragging = true;
            previousMousePosition = {
                x: e.touches[0].clientX,
                y: e.touches[0].clientY
            };
        });

        renderer.domElement.addEventListener('touchmove', (e) => {
            if (isDragging) {
                const deltaX = e.touches[0].clientX - previousMousePosition.x;
                const deltaY = e.touches[0].clientY - previousMousePosition.y;

                rotation.y += deltaX * 0.01;
                rotation.x += deltaY * 0.01;

                previousMousePosition = {
                    x: e.touches[0].clientX,
                    y: e.touches[0].clientY
                };
            }
            e.preventDefault();
        });

        renderer.domElement.addEventListener('touchend', () => {
            isDragging = false;
        });

        // Animation
        function animate() {
            requestAnimationFrame(animate);

            if (!isDragging) {
                rotation.y += 0.005;
            }

            mugGroup.rotation.y = rotation.y;
            mugGroup.rotation.x = Math.max(-0.5, Math.min(0.5, rotation.x));

            renderer.render(scene, camera);
        }
        animate();

        // Responsive
        window.addEventListener('resize', () => {
            const container = document.getElementById('canvas-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });

        // Fonction pour s√©lectionner un logo
        function selectLogo(index, element) {
            selectedLogoIndex = index;

            // Retirer la s√©lection pr√©c√©dente
            document.querySelectorAll('.logo-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Ajouter la s√©lection
            element.classList.add('selected');

            // Cr√©er une texture color√©e pour le logo
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');

            // Gradient de fond
            const gradient = ctx.createLinearGradient(0, 0, 512, 512);
            gradient.addColorStop(0, '#ffffff');
            gradient.addColorStop(1, '#f5f5f5');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 512, 512);

            // Dessiner le logo SVG (simul√© avec des formes)
            ctx.fillStyle = '#d4af37';
            switch(index) {
                case 0: // Bouclier
                    ctx.beginPath();
                    ctx.moveTo(256, 100);
                    ctx.lineTo(150, 150);
                    ctx.lineTo(150, 300);
                    ctx.quadraticCurveTo(150, 400, 256, 450);
                    ctx.quadraticCurveTo(362, 400, 362, 300);
                    ctx.lineTo(362, 150);
                    ctx.closePath();
                    ctx.fill();
                    break;
                case 1: // √âtoile
                    drawStar(ctx, 256, 256, 5, 100, 50);
                    break;
                case 2: // Cercle
                    ctx.beginPath();
                    ctx.arc(256, 256, 120, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.strokeStyle = '#d4af37';
                    ctx.lineWidth = 10;
                    ctx.stroke();
                    break;
                case 3: // Coeur
                    ctx.beginPath();
                    ctx.moveTo(256, 400);
                    ctx.bezierCurveTo(256, 380, 256, 350, 256, 320);
                    ctx.bezierCurveTo(256, 250, 320, 200, 320, 150);
                    ctx.bezierCurveTo(320, 100, 256, 100, 256, 150);
                    ctx.bezierCurveTo(256, 100, 192, 100, 192, 150);
                    ctx.bezierCurveTo(192, 200, 256, 250, 256, 320);
                    ctx.bezierCurveTo(256, 350, 256, 380, 256, 400);
                    ctx.closePath();
                    ctx.fill();
                    break;
                case 4: // Graphique
                    ctx.fillRect(180, 300, 40, 100);
                    ctx.fillRect(236, 250, 40, 150);
                    ctx.fillRect(292, 200, 40, 200);
                    break;
                case 5: // Cadeau
                    ctx.fillRect(180, 220, 152, 180);
                    ctx.fillRect(240, 180, 32, 220);
                    ctx.fillStyle = '#f4d03f';
                    ctx.fillRect(180, 260, 152, 20);
                    break;
            }

            const texture = new THREE.CanvasTexture(canvas);
            mugBody.material.map = texture;
            mugBody.material.needsUpdate = true;

            updateReview();
        }

        // Fonction pour dessiner une √©toile
        function drawStar(ctx, cx, cy, spikes, outerRadius, innerRadius) {
            let rot = Math.PI / 2 * 3;
            let x = cx;
            let y = cy;
            const step = Math.PI / spikes;

            ctx.beginPath();
            ctx.moveTo(cx, cy - outerRadius);
            for (let i = 0; i < spikes; i++) {
                x = cx + Math.cos(rot) * outerRadius;
                y = cy + Math.sin(rot) * outerRadius;
                ctx.lineTo(x, y);
                rot += step;

                x = cx + Math.cos(rot) * innerRadius;
                y = cy + Math.sin(rot) * innerRadius;
                ctx.lineTo(x, y);
                rot += step;
            }
            ctx.lineTo(cx, cy - outerRadius);
            ctx.closePath();
            ctx.fill();
        }

        // Fonction pour mettre √† jour le texte
        function updateText() {
            userTextValue = document.getElementById('userText').value;
            document.getElementById('textPreview').textContent = userTextValue || 'Votre texte appara√Ætra ici';

            // Cr√©er une texture avec le texte
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');

            // Copier la texture existante si elle existe
            if (mugBody.material.map) {
                ctx.drawImage(mugBody.material.map.image, 0, 0);
            } else {
                const gradient = ctx.createLinearGradient(0, 0, 512, 512);
                gradient.addColorStop(0, '#ffffff');
                gradient.addColorStop(1, '#f5f5f5');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 512, 512);
            }

            // Ajouter le texte
            if (userTextValue) {
                ctx.fillStyle = '#2c2c2c';
                ctx.font = 'italic 600 36px Georgia, serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(userTextValue, 256, 256);
            }

            const texture = new THREE.CanvasTexture(canvas);
            mugBody.material.map = texture;
            mugBody.material.needsUpdate = true;

            updateReview();
        }

        // Navigation entre les √©tapes
        function goToStep(step) {
            if (step < 0 || step > 2) return;

            currentStep = step;

            // Mettre √† jour le stepper
            document.querySelectorAll('.step').forEach((stepEl, index) => {
                if (index <= step) {
                    stepEl.classList.add('active');
                } else {
                    stepEl.classList.remove('active');
                }
            });

            // Mettre √† jour les sections
            document.querySelectorAll('.content-section').forEach((section, index) => {
                if (index === step) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });

            // Mettre √† jour les boutons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (step === 0) {
                prevBtn.style.display = 'none';
                nextBtn.textContent = 'Continuer';
            } else if (step === 2) {
                prevBtn.style.display = 'inline-block';
                nextBtn.textContent = 'Commander';
            } else {
                prevBtn.style.display = 'inline-block';
                nextBtn.textContent = 'Continuer';
            }

            if (step === 2) {
                updateReview();
            }
        }

        function nextStep() {
            if (currentStep === 2) {
                alert('üéâ Merci pour votre commande ! Votre mug collection sera bient√¥t pr√™t.');
                return;
            }
            goToStep(currentStep + 1);
        }

        function previousStep() {
            goToStep(currentStep - 1);
        }

        // Mettre √† jour la revue
        function updateReview() {
            const logoNames = ['Bouclier', '√âtoile', 'Cercle', 'C≈ìur', 'Graphique', 'Cadeau'];
            document.getElementById('reviewLogo').textContent =
                selectedLogoIndex >= 0 ? logoNames[selectedLogoIndex] : 'Aucun';
            document.getElementById('reviewText').textContent =
                userTextValue || 'Aucune';
        }
    </script>
</body>
</html>
